---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "hypercore_disk Resource - hypercore"
subcategory: ""
description: |-
  Hypercore disk resource to manage VM disks. To use this resource, it's recommended to set the environment variable TF_CLI_ARGS_apply="-parallelism=1" or pass the -parallelism parameter to the terraform apply. Removing disk from a running VM is (often) not possible. In this case it is required to shutdown the VM before disk removal.
---

# hypercore_disk (Resource)

Hypercore disk resource to manage VM disks. <br><br>To use this resource, it's recommended to set the environment variable `TF_CLI_ARGS_apply="-parallelism=1"` or pass the `-parallelism` parameter to the `terraform apply`.<br><br> Removing disk from a running VM is (often) not possible. In this case it is required to shutdown the VM before disk removal.

## Example Usage

```terraform
locals {
  vm_name = "myvm"
}

data "hypercore_vms" "diskvm" {
  name = local.vm_name
}

resource "hypercore_disk" "disk_cloned" {
  vm_uuid = data.hypercore_vms.diskvm.vms.0.uuid
  type    = "VIRTIO_DISK"
  size    = 47.2
  # flash_priority will be fetched from the HC3 API and it will
  # be set to that unless speicifically specified otherwise
}

resource "hypercore_disk" "disk_newly_created" {
  vm_uuid        = data.hypercore_vms.diskvm.vms.0.uuid
  type           = "IDE_DISK"
  size           = 3.0
  flash_priority = 5 # defaults to 4 if not provided
}

output "diskvm_uuid" {
  value = data.hypercore_vms.diskvm.vms.0.uuid
}

# an existing disk state can also be import to then modify
import {
  to = hypercore_disk.disk_cloned

  # import id consists of three parts: vm_uuid:disk_type:disk_slot
  id = format("%s:%s:%d", data.hypercore_vms.diskvm.vms.0.uuid, "VIRTIO_DISK", 1)
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `vm_uuid` (String) VM UUID.

### Optional

- `flash_priority` (Number) SSD tiering priority factor for block placement. If not provided, it will default to `4`, unless imported, in which case the disk's current flash priority will be taken into account and can then be modified. This can be any **positive** value between (including) `0` and `11`.
- `iso_uuid` (String) ISO UUID we want to attach to the disk, only available with disk type `IDE_CDROM`.
- `size` (Number) Disk size in `GB`. Must be larger than the current size of the disk if specified.
- `source_virtual_disk_id` (String) UUID of the virtual disk to use to clone and attach to the VM.
- `type` (String) Disk type. Can be: `IDE_DISK`, `IDE_CDROM`, `SCSI_DISK`, `VIRTIO_DISK`, `IDE_FLOPPY`, `NVRAM`, `VTPM`

### Read-Only

- `id` (String) Disk identifier
- `slot` (Number) Disk slot number. Will not do anything if the disk already exists, since HC3 doesn't change disk slots to existing disks.
